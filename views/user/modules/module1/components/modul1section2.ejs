<section id="m1s2" class="w-full py-10 px-4 md:px-10 rounded-2xl">
  <div class="bg-[var(--putih)] rounded-3xl px-6 py-10 max-w-screen-xl mx-auto text-center">
    <!-- Judul -->
    <h2 class="text-blue-900 text-3xl md:text-5xl font-extrabold mb-10 px-6">Kenapa Uangmu Selalu Lenyap?</h2>
    
    <!-- Container animasi -->
    <div class="relative flex justify-center items-center h-[280px] md:h-[360px]">
      <!-- Item Kiri -->
      <div class="absolute left-4 top-1/2 -translate-y-1/2 space-y-6 text-left text-blue-900 z-10">
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="jajan">üçî</div>
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="belanja">üõçÔ∏è</div>
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="ngopi">‚òï</div>
      </div>
      
      <!-- Dompet -->
      <div class="relative z-20">
        <div class="wallet bg-amber-800 w-40 md:w-52 h-24 md:h-32 mx-auto rounded-lg shadow-lg relative overflow-hidden">
          <div class="absolute inset-2 bg-amber-700 rounded-lg"></div>
          <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-yellow-300 text-lg md:text-xl font-bold">üí∞</div>
        </div>
      </div>
      
      <!-- Item Kanan -->
      <div class="absolute right-4 top-1/2 -translate-y-1/2 space-y-6 text-right text-blue-900 z-10">
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="hiburan">üé´</div>
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="game">üéÆ</div>
        <div class="spending-item w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center text-2xl cursor-pointer" data-item="cemilan">üçü</div>
      </div>
      
      <!-- Koin Animasi Container -->
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 pointer-events-none">
        <!-- Koin akan dibuat secara dinamis oleh JavaScript -->
      </div>
    </div>
    
    <!-- Hook -->
    <h3 class="text-blue-900 text-xl font-bold mt-10 px-6">
      Dompetmu jadi portal keluar masuk uang. Tapi... lebih sering keluar ya? üòÖ
    </h3>
  </div>
</section>

<style>
.spending-item {
  transition: all 0.3s ease;
}

.spending-item:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
}

.spending-item.highlight {
  background-color: rgba(251, 191, 36, 0.9);
  transform: scale(1.2);
  box-shadow: 0 0 25px rgba(251, 191, 36, 0.7);
}

.coin {
  position: absolute;
  width: 20px;
  height: 20px;
  background: linear-gradient(45deg, #ffd700, #ffed4e);
  border-radius: 50%;
  border: 2px solid #ffa500;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  animation-fill-mode: forwards;
  opacity: 0;
}

.coin::before {
  content: 'üí∞';
  font-size: 10px;
}

@keyframes coinFlyLeft1 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(-60px, -15px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(-120px, -30px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(-150px, -37px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(-160px, -40px) scale(0.2) rotate(360deg);
  }
}

@keyframes coinFlyLeft2 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(-70px, 8px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(-135px, 15px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(-170px, 18px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(-180px, 20px) scale(0.2) rotate(360deg);
  }
}

@keyframes coinFlyLeft3 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(-80px, 30px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(-150px, 60px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(-190px, 75px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(-200px, 80px) scale(0.2) rotate(360deg);
  }
}

@keyframes coinFlyRight1 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(60px, -15px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(120px, -30px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(150px, -37px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(160px, -40px) scale(0.2) rotate(360deg);
  }
}

@keyframes coinFlyRight2 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(70px, 8px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(135px, 15px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(170px, 18px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(180px, 20px) scale(0.2) rotate(360deg);
  }
}

@keyframes coinFlyRight3 {
  0% { 
    opacity: 1;
    transform: translate(0, 0) scale(1) rotate(0deg);
  }
  30% {
    opacity: 1;
    transform: translate(80px, 30px) scale(0.9) rotate(108deg);
  }
  70% {
    opacity: 0.7;
    transform: translate(150px, 60px) scale(0.7) rotate(252deg);
  }
  90% {
    opacity: 0.3;
    transform: translate(190px, 75px) scale(0.4) rotate(324deg);
  }
  100% { 
    opacity: 0;
    transform: translate(200px, 80px) scale(0.2) rotate(360deg);
  }
}

.wallet {
  transition: all 0.3s ease;
}

.wallet.shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const spendingItems = document.querySelectorAll('.spending-item');
  const wallet = document.querySelector('.wallet');
  const coinContainer = document.querySelector('.absolute.top-1\\/2.left-1\\/2.-translate-x-1\\/2.-translate-y-1\\/2.z-30');
  
  let animationRunning = false;
  
  function createCoin(animationType, delay = 0) {
    setTimeout(() => {
      const coin = document.createElement('div');
      coin.className = 'coin';
      coin.style.animation = `${animationType} 1.5s ease-out forwards`;
      coinContainer.appendChild(coin);
      
      // Remove coin after animation
      setTimeout(() => {
        if (coin.parentNode) {
          coin.parentNode.removeChild(coin);
        }
      }, 1500);
    }, delay);
  }
  
  function animateCoinsToItem(targetSide) {
    // Remove the blocking mechanism - allow continuous animation
    
    // Shake wallet
    wallet.classList.add('shake');
    setTimeout(() => {
      wallet.classList.remove('shake');
    }, 300);
    
    if (targetSide === 'left') {
      createCoin('coinFlyLeft1', 0);
      createCoin('coinFlyLeft2', 150);
      createCoin('coinFlyLeft3', 300);
    } else {
      createCoin('coinFlyRight1', 0);
      createCoin('coinFlyRight2', 150);
      createCoin('coinFlyRight3', 300);
    }
  }
  
  // Auto animation every 1.5 seconds - continuous loop
  let autoAnimationIndex = 0;
  const sides = ['left', 'right'];
  const items = ['jajan', 'belanja', 'ngopi', 'hiburan', 'game', 'cemilan'];
  
  function runContinuousAnimation() {
    // Always animate, ignore if other animation is running
    const targetSide = sides[Math.floor(Math.random() * 2)]; // Random side
    
    // Shake wallet
    wallet.classList.add('shake');
    setTimeout(() => {
      wallet.classList.remove('shake');
    }, 300);
    
    // Create multiple coins with random timing
    for(let i = 0; i < 3; i++) {
      const delay = Math.random() * 400;
      const animType = targetSide === 'left' ? 
        ['coinFlyLeft1', 'coinFlyLeft2', 'coinFlyLeft3'][i] :
        ['coinFlyRight1', 'coinFlyRight2', 'coinFlyRight3'][i];
      createCoin(animType, delay);
    }
    
    autoAnimationIndex = (autoAnimationIndex + 1) % sides.length;
  }
  
  // Start continuous animation immediately and repeat
  runContinuousAnimation();
  const autoInterval = setInterval(runContinuousAnimation, 1500);
  
  // Add click handlers for spending items
  spendingItems.forEach((item, index) => {
    item.addEventListener('click', () => {
      // Always allow click animation
      
      // Highlight clicked item
      item.classList.add('highlight');
      setTimeout(() => {
        item.classList.remove('highlight');
      }, 800);
      
      // Determine side and animate
      const isLeftSide = index < 3;
      animateCoinsToItem(isLeftSide ? 'left' : 'right');
    });
    
    // Hover effects
    item.addEventListener('mouseenter', () => {
      item.style.transform = 'scale(1.05)';
    });
    
    item.addEventListener('mouseleave', () => {
      if (!item.classList.contains('highlight')) {
        item.style.transform = 'scale(1)';
      }
    });
  });
  
  // Cleanup interval on page unload
  window.addEventListener('beforeunload', () => {
    clearInterval(autoInterval);
  });
});
</script>