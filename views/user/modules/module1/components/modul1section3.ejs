<section id="m1s3" class="w-full py-10 px-4 md:px-10 rounded-2xl">
  <!-- Judul & Deskripsi -->
  <div class="bg-[var(--putih)] rounded-3xl px-6 py-10 max-w-screen-xl mx-auto text-center">
    <h2 class="text-2xl md:text-3xl font-bold mb-2">Tipe-Tipe Pengeluar Boros</h2>
    <p class="mb-8 text-gray-600">Kenali tipe pengeluar boros mana yang paling mirip dengan kamu! Pilih karakter, ikuti quiz, dan temukan hasilnya.</p>
    
    <!-- Div 1: Show 3 Card Karakter -->
    <div id="m1s3-div1" class="flex flex-col md:flex-row gap-6 justify-center items-stretch transition-all duration-500">
      <!-- Card 1 -->
      <!-- Card 1 -->
<div class="bg-white rounded-xl shadow-lg p-6 flex-1 flex flex-col items-center">
  <img src="https://raw.githubusercontent.com/luthfibphoenix/apmul/main/SIIMPULSIF.png" alt="Karakter 1" class="w-24 h-24 mb-3 rounded-full object-cover">
  <h3 class="font-bold text-lg mb-1">Si Impulsif</h3>
  <ul class="text-left text-gray-500 text-sm mb-2 list-disc ml-4">
    <li>Sering belanja tanpa pikir panjang</li>
    <li>Suka diskon & promo</li>
    <li>Barang sering tidak terpakai</li>
  </ul>
</div>
      <!-- Card 2 -->
      <div class="bg-white rounded-xl shadow-lg p-6 flex-1 flex flex-col items-center">
        <img src="https://raw.githubusercontent.com/luthfibphoenix/apmul/main/SOSIALITA.png" alt="Karakter 2" class="w-24 h-24 mb-3 rounded-full object-cover">
        <h3 class="font-bold text-lg mb-1">Si Sosialita</h3>
        <ul class="text-left text-gray-500 text-sm mb-2 list-disc ml-4">
          <li>Suka nongkrong & traktir teman</li>
          <li>Takut FOMO</li>
          <li>Prioritas gaya hidup sosial</li>
        </ul>
      </div>
      <!-- Card 3 -->
      <div class="bg-white rounded-xl shadow-lg p-6 flex-1 flex flex-col items-center">
        <img src="https://raw.githubusercontent.com/luthfibphoenix/apmul/main/PLANNERGAGAL.png" alt="Karakter 3" class="w-24 h-24 mb-3 rounded-full object-cover">
        <h3 class="font-bold text-lg mb-1">Si Planner Gagal</h3>
        <ul class="text-left text-gray-500 text-sm mb-2 list-disc ml-4">
          <li>Suka bikin rencana, susah konsisten</li>
          <li>Sering tergoda beli di luar rencana</li>
          <li>Suka menunda nabung</li>
        </ul>
      </div>
    </div>

    <!-- Button Mulai Quiz -->
    <div id="m1s3-btn-start" class="mt-8">
      <button onclick="showQuiz()" class="bg-[var(--navy)] text-white px-8 py-3 rounded-full font-semibold hover:bg-[var(--navy)] transition">Ayo Mulai Ketahui Dirimu!</button>
    </div>

    <!-- Div 2: Quiz (hidden by default) -->
    <div id="m1s3-div2" class="hidden transition-all duration-500 mt-8 max-w-xl mx-auto">
      <form id="quizForm" onsubmit="return submitQuiz()">
        <div id="quiz-question" class="mb-6 text-left">
          <!-- Pertanyaan dan opsi radio akan diinject JS di sini -->
        </div>
        <div class="flex justify-between">
          <button type="button" id="btnBack" onclick="prevQuestion()" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-full font-semibold hover:bg-gray-300 transition hidden">Back</button>
          <button type="button" id="btnNext" onclick="nextQuestion()" class="bg-[var(--navy)] text-white px-6 py-2 rounded-full font-semibold hover:bg-[var(--navy)] transition">Next</button>
          <button type="submit" id="btnSubmit" class="bg-[var(--kuning)] text-[var(--navy)] px-6 py-2 rounded-full font-semibold hover:bg-[var(--kuning)] transition hidden">Submit</button>
        </div>
      </form>
    </div>

    <!-- Div 3: Hasil Quiz (hidden by default) -->
    <div id="m1s3-div3" class="hidden transition-all duration-500 mt-8">
      <div class="bg-[var(--kuning)] rounded-xl p-6 max-w-lg mx-auto text-center">
        <h3 class="font-bold text-xl mb-2">Hasil Quiz Kamu:</h3>
        <div id="hasilKarakter" class="mb-4">
          <!-- Hasil karakter akan diinject JS -->
        </div>
        <button onclick="resetQuiz()" class="bg-[var(--navy)] text-white px-6 py-2 rounded-full font-semibold hover:bg-[var(--navy) transition">Coba Lagi</button>
      </div>
    </div>
  </div>
</section>

<script>
  // Data quiz
  const questions = [
    {
      q: "Kalau ada diskon besar, apa yang kamu lakukan?",
      a: [
        { text: "Langsung beli, mumpung murah!", type: "impulsif" },
        { text: "Ajak teman biar seru belanjanya!", type: "sosialita" },
        { text: "Cek dulu, tapi kadang tetap tergoda beli.", type: "planner" }
      ]
    },
    {
      q: "Uang jajan kamu tiba-tiba habis, biasanya karena apa?",
      a: [
        { text: "Belanja dadakan tanpa rencana.", type: "impulsif" },
        { text: "Kebanyakan nongkrong bareng teman.", type: "sosialita" },
        { text: "Suka lupa catat pengeluaran.", type: "planner" }
      ]
    },
    {
      q: "Saat dapat uang lebih, kamu akan...",
      a: [
        { text: "Langsung cari barang yang diinginkan.", type: "impulsif" },
        { text: "Traktir teman atau keluarga.", type: "sosialita" },
        { text: "Niatnya nabung, tapi sering batal.", type: "planner" }
      ]
    },
    {
      q: "Kamu paling sering menyesal setelah...",
      a: [
        { text: "Beli barang yang ternyata nggak dipakai.", type: "impulsif" },
        { text: "Nongkrong mahal, dompet menipis.", type: "sosialita" },
        { text: "Lupa atur budget, uang cepat habis.", type: "planner" }
      ]
    },
    {
      q: "Kalau ada rencana keuangan, kamu...",
      a: [
        { text: "Nggak terlalu peduli, yang penting happy.", type: "impulsif" },
        { text: "Ikut aja asal bareng teman.", type: "sosialita" },
        { text: "Bikin rencana, tapi sering nggak jalan.", type: "planner" }
      ]
    }
  ];

  const karakterInfo = {
    impulsif: {
      nama: "Si Impulsif",
      img: "https://raw.githubusercontent.com/luthfibphoenix/apmul/main/SIIMPULSIF.png",
      desc: "Kamu cenderung belanja tanpa pikir panjang dan mudah tergoda promo. Yuk, belajar lebih bijak mengatur pengeluaran!"
    },
    sosialita: {
      nama: "Si Sosialita",
      img: "https://raw.githubusercontent.com/luthfibphoenix/apmul/main/SOSIALITA.png",
      desc: "Kamu suka mengutamakan gaya hidup sosial dan sering menghabiskan uang untuk nongkrong atau traktir teman."
    },
    planner: {
      nama: "Si Planner Gagal",
      img: "https://raw.githubusercontent.com/luthfibphoenix/apmul/main/PLANNERGAGAL.png",
      desc: "Kamu suka membuat rencana keuangan, tapi sering gagal konsisten. Yuk, mulai disiplin dalam mengatur keuangan!"
    }
  };

  let currentQuestion = 0;
  let answers = [];

  function showQuiz() {
    document.getElementById('m1s3-div1').classList.add('hidden');
    document.getElementById('m1s3-btn-start').classList.add('hidden');
    document.getElementById('m1s3-div2').classList.remove('hidden');
    showQuestion();
  }

  function showQuestion() {
    const q = questions[currentQuestion];
    let html = `<h4 class="font-bold text-lg mb-4">${q.q}</h4>`;
    q.a.forEach((ans, i) => {
      html += `
        <label class="block text-left cursor-pointer mb-3">
          <input type="radio" name="answer" value="${ans.type}" class="mr-3 align-middle" ${answers[currentQuestion] === ans.type ? 'checked' : ''} required>
          <span class="align-middle">${ans.text}</span>
        </label>
      `;
    });
    document.getElementById('quiz-question').innerHTML = html;
    document.getElementById('btnBack').classList.toggle('hidden', currentQuestion === 0);
    document.getElementById('btnNext').classList.toggle('hidden', currentQuestion === questions.length - 1);
    document.getElementById('btnSubmit').classList.toggle('hidden', currentQuestion !== questions.length - 1);
  }

  function nextQuestion() {
    const selected = document.querySelector('input[name="answer"]:checked');
    if (!selected) return alert('Pilih salah satu jawaban!');
    answers[currentQuestion] = selected.value;
    if (currentQuestion < questions.length - 1) {
      currentQuestion++;
      showQuestion();
    }
  }

  function prevQuestion() {
    if (currentQuestion > 0) {
      currentQuestion--;
      showQuestion();
    }
  }

  function submitQuiz() {
    const selected = document.querySelector('input[name="answer"]:checked');
    if (!selected) return alert('Pilih salah satu jawaban!');
    answers[currentQuestion] = selected.value;
    // Hitung tipe terbanyak
    const count = { impulsif: 0, sosialita: 0, planner: 0 };
    answers.forEach(ans => count[ans]++);
    const result = Object.keys(count).reduce((a, b) => count[a] > count[b] ? a : b);
    showResult(result);
    return false; // prevent form submit
  }

  function showResult(type) {
    document.getElementById('m1s3-div2').classList.add('hidden');
    document.getElementById('m1s3-div3').classList.remove('hidden');
    const info = karakterInfo[type];
    document.getElementById('hasilKarakter').innerHTML = `
      <img src="${info.img}" alt="${info.nama}" class="w-20 h-20 mx-auto mb-3 rounded-full object-cover">
      <h4 class="font-bold text-lg mb-1">${info.nama}</h4>
      <p class="text-gray-600">${info.desc}</p>
    `;
  }

  function resetQuiz() {
    currentQuestion = 0;
    answers = [];
    document.getElementById('m1s3-div3').classList.add('hidden');
    document.getElementById('m1s3-div1').classList.remove('hidden');
    document.getElementById('m1s3-btn-start').classList.remove('hidden');
  }
</script>
